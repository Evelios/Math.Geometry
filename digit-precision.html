<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Digit Precision</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Thomas Waters">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="/fsharp-geometry/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="/fsharp-geometry/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/fsharp-geometry/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/fsharp-geometry/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="/fsharp-geometry/"><img id="fsdocs-logo" src="/fsharp-geometry/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/Evelios/fsharp-geometry/blob/master/LICENSE.md">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/Evelios/fsharp-geometry/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/Evelios/fsharp-geometry/">Source Repository</a></li>
                <li class="nav-header">
  Tutorials
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/digit-precision.html">
    Digit Precision
  </a>
</li>             
<li class="nav-header">
  Modules
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/angle.html">
    Angle
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/length.html">
    Lengths
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/interval.html">
    Interval
  </a>
</li>             
<li class="nav-header">
  2D Modules
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/arc.html">
    2D Arc
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/axes.html">
    2D Axis
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/bounding-box.html">
    2D Bounding Box
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/circle.html">
    2D Circle
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/direction.html">
    2D Direction
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/ellipse.html">
    2D Ellipse
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/frame.html">
    2D Frame
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/line-segment.html">
    2D Line Segment
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/point.html">
    2D Points
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/polygon.html">
    2D Polygon
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/polyline.html">
    2D Poly-Line
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/size.html">
    2D Size
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/triangle.html">
    2D Triangle
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/vector.html">
    2D Vectors
  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fsharp-geometry/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="/fsharp-geometry/">fsharp-geometry</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            
<h1><a name="Digit-Precision" class="anchor" href="#Digit-Precision">Digit Precision</a></h1>
<p>This library provides equality operators <code>lhs = rhs</code> for many of the data
structures. The savvy among you may have noticed that all the data structures
are also storing float numbers. Comparing <a href="https://floating-point-gui.de/errors/comparison/">floating point equality</a> is no easy
task. Due to floating point rounding errors when numbers are being stored, and
with many calculations (especially trig functions), the output numbers may be
slightly different than you would expect.</p>
<p>We can show this with an example. We would expect the following to be true</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="n">1.</span> <span class="o">=</span> <span class="pn">(</span><span class="n">0.3</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span class="o">+</span> <span class="n">0.1</span>
</code></pre>
<table class="pre"><tr><td><pre><code>false</code></pre></td></tr></table>
<p>Checking the returned value from the right hand side we see that we are getting
the value <code>1.0</code>. So what's going on?</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">(</span><span class="n">0.3</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span class="o">+</span> <span class="n">0.1</span>
</code></pre>
<table class="pre"><tr><td><pre><code>1.0</code></pre></td></tr></table>
<p>Well, with a little investigation, we can see that we aren't getting exactly
<code>1.0</code>. We are getting ever so slightly less than <code>1.0</code>.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">(</span><span class="pn">(</span><span class="n">0.3</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span class="o">+</span> <span class="n">0.1</span><span class="pn">)</span> <span class="o">-</span> <span class="n">1.</span>
</code></pre>
<table class="pre"><tr><td><pre><code>-1.110223025e-16</code></pre></td></tr></table>
<p>Comparing datastructures that use floating point numbers can sometimes be a sign
of bad code code design, but this is not always the case. So when you are
looking to do equality comparison, this library provides the ability to do
approximate equality comparison on floating point numbers and data structures
like points and vectors.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="m">Float</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 5)" onmouseover="showTip(event, 'fs4', 5)" class="id">almostEqual</span> <span class="n">1.</span> <span class="pn">(</span><span class="pn">(</span><span class="n">0.3</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span class="o">+</span> <span class="n">0.1</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<p>You can change the precision that floating point operations are performed at. The
default precision is a digit precision of 10. If we were looking a higher level
of precision, you can change the digit precision to be something more fitting of
your needs. In this example, we can make that equality check fail by increasing
the precision we are requiring for this operation.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Increasing the equality precision to make this check fail</span>
<span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="m">Float</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">DigitPrecision</span> <span class="k">&lt;-</span> <span class="n">17</span>

<span onmouseout="hideTip(event, 'fs3', 8)" onmouseover="showTip(event, 'fs3', 8)" class="m">Float</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 9)" onmouseover="showTip(event, 'fs4', 9)" class="id">almostEqual</span> <span class="n">1.</span> <span class="pn">(</span><span class="pn">(</span><span class="n">0.3</span> <span class="o">*</span> <span class="n">3.</span><span class="pn">)</span> <span class="o">+</span> <span class="n">0.1</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>
<h1><a name="Examples" class="anchor" href="#Examples">Examples</a></h1>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs6', 10)" onmouseover="showTip(event, 'fs6', 10)" class="m">Point2D</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 11)" onmouseover="showTip(event, 'fs7', 11)" class="id">meters</span> <span class="n">1.</span> <span class="n">5.</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 12)" onmouseover="showTip(event, 'fs6', 12)" class="m">Point2D</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 13)" onmouseover="showTip(event, 'fs7', 13)" class="id">meters</span> <span class="n">1.</span> <span class="pn">(</span><span class="n">5.</span> <span class="o">+</span> <span class="n">1.e-20</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>No value returned by any evaluator</code></pre></td></tr></table>

            <div class="fsdocs-tip" id="fs1">namespace Geometry</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />union case Cartesian.Cartesian: Cartesian<br /><br />--------------------<br />type Cartesian = | Cartesian</div>
<div class="fsdocs-tip" id="fs3">Multiple items<br />module Float

from Geometry<br /><br />--------------------<br />type Float =
  new : unit -&gt; Float
  static member DigitPrecision : int
  static member Epsilon : float
  static member MinNormal : float<br /><br />--------------------<br />new : unit -&gt; Float</div>
<div class="fsdocs-tip" id="fs4">val almostEqual : a:float -&gt; b:float -&gt; bool</div>
<div class="fsdocs-tip" id="fs5">property Float.DigitPrecision: int with get, set</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />module Point2D

from Geometry<br /><br />--------------------<br />[&lt;Struct&gt;]
type Point2D&lt;&#39;Unit,&#39;Coordinates&gt; =
  { X: Length&lt;&#39;Unit&gt;
    Y: Length&lt;&#39;Unit&gt; }
    interface IComparable
    interface IComparable&lt;Point2D&lt;&#39;Unit,&#39;Coordinates&gt;&gt;
    member Comparison : other:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; -&gt; int
    override Equals : obj:obj -&gt; bool + 1 overload
    override GetHashCode : unit -&gt; int
    member LessThan : other:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; -&gt; bool
    static member ( * ) : lhs:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; * rhs:float -&gt; Point2D&lt;&#39;Unit,&#39;Coordinates&gt; + 1 overload
    static member ( + ) : lhs:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; * rhs:Vector2D&lt;&#39;Unit,&#39;Coordinates&gt; -&gt; Point2D&lt;&#39;Unit,&#39;Coordinates&gt;
    static member ( - ) : lhs:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; * rhs:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; -&gt; Vector2D&lt;&#39;Unit,&#39;Coordinates&gt; + 1 overload
    static member ( / ) : lhs:Point2D&lt;&#39;Unit,&#39;Coordinates&gt; * rhs:float -&gt; Point2D&lt;&#39;Unit,&#39;Coordinates&gt;
    ...</div>
<div class="fsdocs-tip" id="fs7">val meters : x:float -&gt; y:float -&gt; Point2D&lt;Meters,&#39;Coordinates&gt;</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = '/fsharp-geometry/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="/fsharp-geometry/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>